<% @habits.each do |habit| %>
  <div class="habit-show-card mb-4">
    <% if habit.photo.present? %>
      <div class="habit-image" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('<%= cl_image_path habit.photo.key, crop: :fill, gravity: :face %>')">
      <div class="habit-image-title-area"><h2><%= habit.title.titleize %></h2></div>
      </div>
    <% end %>

    <div class="habit-content">
      <% if habit.photo.present? %>
      <% else %>
      <h2 class="habit-title"><%= habit.title.titleize %></h2>
      <% end %>
      <%# Category Chip (Render) %>
      <%= render partial: 'shared/category_chip', locals: { habit: habit } %>
      <%# Trigger Chip %>
      <% if habit.trigger.present? %>
        <p class="chip"><i class="fa-solid fa-bolt-lightning me-1"></i><%= habit.trigger.capitalize %></p>
      <% end %>
      <%# Reward Chip %>
      <% if habit.reward.present? %>
        <p class="chip"><i class="fa-solid fa-gift me-1"></i><%= habit.reward.capitalize %></p>
      <% end %>
      <%# Time and duration %>
      <p><i class="fa-regular fa-clock me-1"></i><%= habit.start_time.strftime("%H:%M") %> for <%= habit.duration_in_minutes %> minutes
      <% if habit.week_recurrence == 1 %>
      every week.
      <% else %>
      every <%= habit.week_recurrence %> weeks.
      <% end %>
      </p>

      <%# Days of the Week %>
      <%= render partial: 'shared/habit_days', locals: { habit: habit } %>


      <p class="mt-4 mb-3"><i class="fa-solid fa-quote-left"></i> I will do this because I want to be <%= habit.identity_goal %>. <i class="fa-solid fa-quote-right"></i></p>
      <p><strong>Current Streak: </strong><%= habit.current_streak %></p>
      <p><strong>Best Streak: </strong><%= habit.best_streak %></p>
    </div>
  </div>
<% end %>
