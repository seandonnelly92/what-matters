<div id="add-habit-form" class="col-11 col-md-6 col-lg-4 col-xl-4">
  <h3>Add a habit</h3>
  <%# FORM IF WE HAVE DATA ON A PARENT RELATION %>
  <% if session[:user_data]["step2"]["relation_to"] == "Parent" %>
    <%= render partial: 'habits/form_parent' %>
  <%# FORM IF WE HAVE DATA ON A CHILD RELATIONSHIP %>
  <% elsif session[:user_data]["step2"]["relation_to"] == "Child" %>
    <%= render partial: 'habits/form_child' %>
  <%# FORM IF WE HAVE DATA ON A PARTNER RELATIONSHIP %>
  <% elsif session[:user_data]["step2"]["relation_to"] == "Partner" %>
    <%= render partial: 'habits/form_partner' %>
  <%# FORM IF WE HAVE DATA ON ANY OTHER RELATIONSHIP (DEFAULT) %>
  <% else %>
    <%= simple_form_for(@habit) do |f| %>
      <%= f.input :title, :label => 'I will:', placeholder: "Call Mum, organise date night" %>
      <div class="week-recurrence">
        <p>I will do this every </p>
        <%= f.input :week_recurrence, label: false, placeholder: "3" %>
        <p>week/s on these days:</p>
      </div>
        <% days_of_week = Date::DAYNAMES.rotate(1) %>
        <%# Days of the week toggles %>
      <div class="days-checkboxes">
        <% days_of_week.each do |day| %>
          <%= check_box_tag "habit[days_of_week][]", day.downcase, (f.object.days_of_week || []).include?(day.downcase), id: "day_#{day.downcase}" %>
          <%= label_tag "day_#{day.downcase}", day[0], class: 'day-checkbox-label' %>
        <% end %>
      </div>
      <div class="time-duration">
        <p>at:</p>
        <%= f.input :start_time, label: false, as: :time, default: Time.parse('8:00') %>
        <p>for</p>
        <%= f.input :duration_in_minutes, label: false, placeholder: "15" %>
        <p>minutes.</p>
      </div>
      <%= f.input :identity_goal, :label => 'I will do this because I want to be:', placeholder: "a proactive husband, the best uncle, a good citizen..." %>
      <%= f.input :category, :label => 'Habit category:', placeholder: "Partner", as: :select, collection: Habit::CATEGORIES %>
      <%# How can we make the categories look more like chips? %>
      <%= f.input :trigger, :label => 'I will do this before/while/after:', placeholder: "while walking the dog, after brushing teeth, before dinner..." %>
      <%= f.input :reward, :label => 'My reward for this is:', placeholder: "a coffee, cake, an episode of Breaking Bad..." %>
      <%= f.input :photo, :label => 'Attached a photograph to this habit:', as: :file %>
      <%= f.submit %>
    <% end %>
  <% end %>



</div>
